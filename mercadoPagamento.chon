{"id":9,"name":"mercado","agents":[{"archClass":"Jason","name":"agenteEstoque","sourceCode":"/* Initial beliefs and rules */\n\n/* Initial goals */\n\n!start.\n\n/* Plans */\n\n+!start <- .print(\"Never Send A Human To Do A Machine's Job!\")."},{"archClass":"Jason","name":"agentePedido","sourceCode":"chainServer(\"http://testchain.chon.group:9984/\").\n\n/* carteira(CHAVE-PRIVADA, CHAVE-PUBLICA) */\nmyWallet(\"2eRFEQRq9vNqdPZi9tKyg115RGvhgyjuah9EgNDWHmp7\",\"D34qTAJzjau1U6BxcUauKqNiYyLNKTcKNMtUnQBz9rjV\").\n\n/*\"id\" do token utilizado*/\ncryptocurrency(\"cfc4c2a63e888523249ea3d0fba1575106b944292b3ae2d6e3a0f880ca86442c\").\n\n/* Representa o valor do pedido, TEMPORARIO */\npedido(1000)\n\n+!pagarPedido <- \n\t?cryptocurrency(Coin);\n\t?chainServer(Server);\n\t?myWallet(MyPriv,MyPub);\n\t?pedido(Valor);\t\n\t.wait(fornecedorWallet(Fornecedor)); // vem do fornecedor\n\t.print(\"Realizando o pagamento.\");\n\t.velluscinum.transferToken(Server,MyPriv,MyPub,Coin,Fornecedor,Valor,pix);\n\t.wait(pix(CodPix));\n\t.send(comunicadorMercado,achieve,confirmarPagamento(CodPix)).\n\n-!pagarPedido: cryptocurrency(Coin) & chainServer(Server) \n\t\t& myWallet(MyPriv,MyPub) <-\n\t\t.velluscinum.tokenBalance(Server,MyPriv,MyPub,Coin,saldo)."},{"archClass":"Communicator","name":"comunicadorMercado","sourceCode":"// Crencas iniciais\nmyUUID(\"80d9c5b3-5327-4836-b722-7481061aff00\").\ngateway(\"skynet.chon.group\", 5500).\nfornecedorA(\"80d9c5b3-5327-4836-b722-7481061aff0a\").\nfornecedorB(\"uuid-fornecedorB\").\n\n// Objetivos iniciais\n!connect.\n\n// Planos\n+!connect: gateway(Server, Port) & myUUID(ID) <-\n    .print(\"Conectando ao gateway...\");\n    .connectCN(Server, Port, ID);\n    !testComm.\n\n+!testComm: fornecedorA(ComunicadorFornecedorA) & not communication(ok) <-\n    .print(\"Testando comunicacao com FornecedorA...\");\n    .sendOut(ComunicadorFornecedorA, tell, communication(trying));\n    .wait(5000);\n    !testComm.\n\n-!testComm.\n-!connect.\n\n+communication(ok)[source(X)] <-\n    .print(\"Comunicacao estabelecida com \", X).\n\n/*Pagamento*/\n\n+!confirmarPagamento(Pix) <- \n\t.sendOut(comunicadorFornecedorA,achieve,confirmarPagamento(Pix)).\n\n-!confirmarPagamento.\n\n\n+informarCarteiraFornecedor(Pub) <-\n\t.send(agentePedido,tell,fornecedorWallet(Pub)).\n\n\n\n"}],"firmwares":[]}