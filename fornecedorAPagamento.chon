{"id":10,"name":"fornecedorAPagamento","agents":[{"archClass":"Jason","name":"agenteFornecedorA","sourceCode":"chainServer(\"http://testchain.chon.group:9984/\").\ncryptocurrency(\"d7bd13c107b432246713a0a95018c91dfd699406422877d7219ecffcccf4a9d2\").\nultimoPedido(0).\n\n/* Objetivos Iniciais */\n!createWallet.\n\n/* Planos */\n+!createWallet <-\n\t.print(\"Gerando carteira digital\");\n\t.velluscinum.buildWallet(myWallet);\n\t.wait(myWallet(Priv,Pub));\n\t.broadcast(tell,fornecedorWallet(Pub)).\n\n+!confirmarPagamento(Pix): cryptocurrency(Coin) & chainServer(Server) & myWallet(MyPriv,MyPub) <-\n\t?ultimoPedido(N);\n\tNrPedido=N+1;\n\t-+ultimoPedido(NrPedido);\n\t.velluscinum.stampTransaction(Server,MyPriv,MyPub,Pix,pagamento(NrPedido)).\n\t"},{"archClass":"Communicator","name":"comunicadorFornecedorA","sourceCode":"// Crencas iniciais\nmyUUID(\"80d9c5b3-5327-4836-b722-7481061aff0a\").\ngateway(\"skynet.chon.group\", 5500).\nsupermercado(\"80d9c5b3-5327-4836-b722-7481061aff00\").\n\n// Objetivos iniciais\n!connect.\n\n// Planos\n+!connect: gateway(Server, Port) & myUUID(MyID) <-\n    .print(\"Conectando ao gateway...\");\n    .connectCN(Server, Port, MyID).\n\n-!connect.\n\n+communication(trying)[source(X)]: fornecedorWallet(Pub) <-\n\t.print(\"Fornecedor pronto... \",X);\n\t.sendOut(X,tell,communication(ok));\n\t//Quando a comunicaÃƒÂ§ÃƒÂ£o estivar estabelecida\n\t!fornecedorWallet(Pub).\n\n// Informa a carteira do fornecedor ao mercado\n+!fornecedorWallet(Pub): supermercado(ComunicadorMercado) <-\n\t.sendOut(ComunicadorMercado,tell,informarCarteiraFornecedor(Pub)).\n\n//Confirmar o pagamento\n+!confirmarPagamento(Pix) <-\n\t.send(agenteFornecedorA, tell, confirmarPagamento(Pix)).\n\n-!fornecedorWallet.\n-!confirmarPagamento."}],"firmwares":[]}